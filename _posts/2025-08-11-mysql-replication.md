---
layout: post
title:  MySQL复制三剑客全面剖析：同步、异步、半同步
date:   2025-08-11 19:11:57
categories: 高可用
tags: mysql
---

* content
{:toc}

### 同步复制（Fully Synchronous Replication）

#### 1. 工作原理

同步复制要求主服务器在执行完一个事务后，必须等待所有从服务器都确认数据已经写入后，才返回结果给客户端。这种方式可以确保主从服务器之间的数据完全一致。

#### 2. 优势

数据一致性高：由于主服务器需要等待所有从服务器确认数据写入，因此可以确保数据在主从服务器之间完全一致。
安全性强：适用于对数据安全性要求极高的场景，如金融系统和关键业务系统。

#### 3. 劣势

性能瓶颈：由于需要等待所有从服务器确认，同步复制可能会显著降低主服务器的性能。
可靠性问题：如果某个从服务器出现故障，可能会导致主服务器事务阻塞。

#### 4. 适用场景

同步复制适用于对数据一致性要求极高，且可以容忍一定性能损失的场景。

### 异步复制（Asynchronous Replication）

#### 1. 工作原理

异步复制是MySQL中最基本的复制方式。主服务器在执行完事务后立即返回结果给客户端，而不等待从服务器确认数据已经写入。数据的复制是在后台进行的。

#### 2. 优势

高性能：由于主服务器不需要等待从服务器确认，因此可以显著提高主服务器的性能。
低延迟：适用于对实时性要求不高的场景。
读写分离：将读操作分发到从服务器，减轻主服务器的压力。

#### 3. 劣势

数据不一致：由于异步复制，主服务器和从服务器之间可能存在数据不一致的情况。

#### 4. 适用场景

异步复制适用于对数据一致性要求不高，但需要高性能和低延迟的场景。

### 半同步复制（Semi-Synchronous Replication）

#### 1. 工作原理

半同步复制是介于异步复制和同步复制之间的一种方式。主服务器在执行完事务后，会等待至少一个从服务器确认数据已经写入后，再返回结果给客户端。这种方式可以在一定程度上提高数据一致性，同时不会显著降低主服务器的性能。

#### 2. 优势

数据一致性较高：相比异步复制，半同步复制可以提供更高的数据一致性。
性能影响较小：相比同步复制，半同步复制对主服务器的性能影响较小。

#### 3. 劣势

从库故障：如果所有从库都出现故障，主库事务可能会阻塞。
数据不一致风险：在某些极端情况下，仍然可能存在数据不一致的情况。

#### 4. 适用场景

半同步复制适用于对数据一致性有一定要求，但又不希望牺牲太多性能的应用场景。