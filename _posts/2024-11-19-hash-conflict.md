---
layout: post
title:  
date:   2024-11-19 10:06:07
categories: 编程
tags: hashmap
---

* content
{:toc}

散列表（Hash table，也叫哈希表），是根据关键码值(Key value)而直接进行访问的数据结构。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做散列函数，存放记录的数组叫做散列表。

哈希表实现将一个较大的集合映射到一个相对较小的集合内，在一个较大的值域里从中选出一些数插入、查询，删除操作一般不真正的将数据从存储空间中清除，而是做一个标记，意为删除。

### 1、哈希函数
哈希函数y = F(x) ，一般选用一下四种方式构造：

#### （1）直接定址法：
H(key) = key 或 H(key) = a × key + b，式中a和b是常数。此方式计算最简单且不会产生冲突，适合关键字的分布基本连续，若分布不连续，则会造成存储空间的大量浪费。

#### （2）除留余数法：
最简单最常用的方法，假定散列表表长为m，取一个不大于m但最接近或等于m的质数p，同时离2的整次幂尽可能的远，因为这样子取值其冲突概率会最小。
H(key) = key %p

但此时也产生了一个问题，不同的数取模可能会得到一个相同的结果，从而导致值域和定义域不是一对一的关系，而变成了一对多的关系，使其不能通过哈希函数来唯一确定一个值，将这种现象称为冲突。

#### （3）数字分析法：
设关键字是r进制数，而r个数码在各位上出现的频率不一定相同，可能在某些位上分布均匀一些，每种数码出现的机会均等；而在某些位上分布不均匀，只有某几种数码经常出现，此时应选取数码分布较为均匀的若干位作为散列地址。此方法适用于已知的关键字集合，若更换了关键字，则需要重新构造新的哈希函数。

#### （4）平方取中法
取关键字的平方值的中间几位作为散列地址。这种方法得到的散列地址与关键字的每位都有关系，因此使得散列地址分布较为均匀，适用于关键字的每位取值都不够均匀或均小于散列地址所需的位数。

### 2、冲突处理
为了解决冲突设计便设计了两种存储结构去解决这个问题，分别为开放寻址法和拉链法。

#### （1）拉链法
拉链法也称为链地址法，是将所有哈希值相同的键值对链接在同一个链表中。这样，对于相同的哈希值，不同的键值对可以在链表中共享相同的位置。这种方法的优点在于它可以有效地处理哈希冲突，即当两个或多个键值对具有相同的哈希值时。每个链表节点包含键值对和指向下一个节点的指针。

#### （2）开放寻址法
开放寻址法是一种在发生哈希冲突时寻找下一个可用的空桶的方法。当发生冲突时，将键值对插入到下一个可用的空桶中。开放寻址法有三种常见的策略：线性探测、二次探测和双重哈希。

- 线性探测是最简单的一种策略，它按照顺序查找下一个可用的空桶。当发生冲突时，它将按照一定的步长逐个探测桶，直到找到一个空桶为止。步长可以是固定的，也可以是随机的。当具有较多同义词时，会发生** “聚集”（或堆积） ** 现象，大大降低查找效率。

- 平方探索法： 查找跳跃长度为线性整数的平方，即0 、 12 、(-1)2 、 22 、(-2)2 、33 、(-3)2…。该方法可以使表中存的元素相对均匀的分布，避免了堆积现象。

##### 三种寻址方式都有着明显的不足：
- 线性寻址，寻址的性能虽然元素个数的增多逐步下降，最坏时间复杂度是O(n)。

- 二次方寻址，寻址的次数比线性寻址较低了，但是会因为步长是二次方，所以需要较长的数组长度，内存利用率可能较低。

- 双重哈希寻址，多次哈希可能会浪费时间，需要优质的哈希函数做支撑。