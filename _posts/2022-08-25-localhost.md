---
layout: post
title: "localhost/127.0.0.1/本机ip/0.0.0.0 的区别"
date: 2022-08-25 17:35:51
categories: network
tags: network
---

* content
{:toc}

**原理分析**

``localhost``
不联网 
不使用网卡，不受防火墙和网卡限制 
本机访问 

``127.0.0.1``
不联网 
网卡传输，受防火墙和网卡限制 
本机访问 

``本机IP`` 
联网 
网卡传输 ，受防火墙和网卡限制 
本机或外部访问


##### 1.127.0.0.1一般分配给loopback接口。loopback是个特殊的网络接口（可理解为虚拟网卡），用于本机各个应用之间的网络交互。只要操作系统的网络组件正常，loopback就能工作。

linux中查看信息：

``` shell
lo Link encap:Local Loopback
   inet addr:127.0.0.1  Mask:255.0.0.0
   inet6 addr: ::1/128 Scope:Host
```

事实上整个127.*网段都能用，ping都能通。使用127.0.0.1作为loopback的默认地址是个惯例。

当ip层收到目的地址为127.0.0.1的数据包时，不调用网卡进行二次封装，而是立即转到本机ip层进行处理，因此ping 127.0.0.1一般作为测试本机tcp/ip协议栈是否正常。

结论：绑定到127.0.0.1的服务只能被本机访问

##### 2.localhost是个域名，一般指向127.0.0.1这个ip，操作系统支持ipv6后，也同时指向::1。

结论：绑定到localhost的服务也只能被本机访问。如果修改了host让localhost指向就本机ip，那就能被局域网其他机器访问。

##### 3.本机地址，指的是本机物理网卡所绑定的网络协议地址，一般指ipv4协议。如果主机有多个网卡，分别连接不同的物理网络，比如192.168.0.1/255.255.255.0 和 192.168.1.1/255.255.255.0，如果服务端socket绑到192.168.0.1，那么192.168.1.1的网段是无法连接的。

结论：绑定到本机地址的服务能被同网段其他机器访问

##### 4.0.0.0.0 代表本机的所有ip地址

``` shell
server.listen({
  host: '0.0.0.0',
  port: 7047
});
```
实际 ``127.0.0.1`` 和 ``本地地址`` 都绑定了