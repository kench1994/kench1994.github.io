---
layout: post
title:  服务器性能指标(QPS/TPS/RT)
date:   2024-12-05 08:59:36
categories: 高并发
tags: QPS
---

* content
{:toc}

- **QPS**: 每秒钟处理完请求的次数，注意这里是处理完，单接口看做是一个事务的话，1TPS=1QPS

- **TPS**：每秒钟处理完的事务次数，一般TPS是对整个系统来讲的。一个应用系统1s能完成多少事务处理，一个事务在分布式处理中，可能会对应多个请求，对于衡量单个接口服务的处理能力，用QPS比较多，TPS是衡量服务器性能的唯一指标

> 对于一个页面的一次访问，形成一个TPS；但一次页面请求，可能产生多次对服务器的请求，服务器对这些请求，就可计入“QPS”之中

- **并发数**：系统能同时处理的请求数

> 并发意味着可以同时进行多个处理。并发在现代编程中无处不在，网络中有多台计算机同时存在，一台计算机上同时运行着多个应用程序。

- **RT**：执行一个请求从开始到最后收到响应数据所花费的总体时间，即从客户端发起请求到收到服务器响应结果的时间

- **吞吐率**
我们一般使用单位时间内服务器处理的请求数来描述其并发处理能力。称之为吞吐率，单位是 "req/s"，吞吐率特指Web服务器单位时间内处理的请求数。

- **吞吐量（Throughput）**
吞吐量，是指在一次性能测试过程中网络上传输的数据量的总和（包含了TPS，QPS和RPS）

> 例子：单接口场景
``` shell
QPS（TPS）= 并发数/平均响应时间
并发数 = QPS（TPS）*平均响应时间
throughput吞吐量 = jmeter的总共请求次数/运行的时间
```

一个典型的上班签到系统，早上8点上班。7点半到8点这30分钟的时间里用户会登录签到系统进行签到。公司员工为1000人，平均每一个员上登录签到系统的时长为5分钟。能够用以下的方法计算。
``` shell
QPS（TPS） = 1000/(30x60) 事务/秒 = 0.56
平均响应时间为 = 5x60 秒
并发数= QPS（TPS）*平均响应时间 = 1000/(30x60) x(5x60)=166.7
```
意思就是说最低需要166.7个人同时登录签到系统进行签到，才能在30分钟内完成所有1000人的签到操作。

> 我自己用的测量方案
```shell
最快处理耗时:<3ms> 
最久处理耗时:<36ms> 
平均处理耗时:<6ms>

反推QPS = 1000ms / 6ms * 4个线程
             = 666.66
向下取整 = 600

最小QPS = 1000ms / 33ms * 4 = 100
```